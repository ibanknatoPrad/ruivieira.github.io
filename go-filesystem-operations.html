<!DOCTYPE html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">

        
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>

        
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
                onload="renderMathInElement(document.body);"></script>

        <link href="https://fonts.googleapis.com/css?family=Nunito:400,300i,800&display=swap" rel="stylesheet" />
        <style>
                @font-face {
                        font-family: JuliaMono-Regular;
                        src: url("https://cdn.jsdelivr.net/gh/cormullion/juliamono/webfonts/JuliaMono-Regular.woff2");
                }
                body {
                        font-family: Nunito;
                        font-size: 13pt;
                        color: #1b2d45;
                }
                #content {
                        max-width: 40rem;
                        padding: 2rem;
                        margin: auto;
                }
                #sidebar {
                   position: absolute;
                        top: 0;
                        left: 0;
                        max-width: 16rem;
                        margin-left: 3rem;
                        margin-top: 3rem;
                }
                h1, h2, h3, h4, h5, h6 {
                        color: #00214d;
                }
                h1 {
                        font-size: 200%;
                }

                h2 {
                        font-size: 167%;
                }
                h3 {
                        font-size: 133%;
                        font-weight: normal;
                }
                pre {
                        background-color: #eee !important;
                        overflow-x: scroll;
                        font-family: JuliaMono-Regular, monospace;
                        font-size: 75%;
                        padding: 1rem;
                }
                code {
                        background-color: #eee !important;
                        font-family: JuliaMono-Regular, monospace;
                        font-size: 75%;
                }
                img {
                        max-width: 100%;
                        margin-top: 1rem;
                        margin-bottom: 1rem;
                }
                .katex { font-size: 1em !important;}
                .footer {
                        margin-top: 3rem;
                        font-size: 0.75rem;
                        color: #ccc;
                }
                .cc-symbol {
                        font-size: 1rem;
                }
                a, a:visited {
                         
                         
                        color: #ff5470;
                        padding: 1px;
                        border-radius: 2px;
                        text-decoration: none;
                }
                a.footnote-ref {
                    font-size: 0.9rem;
                }
                a.footnote-ref::before {
                    content: "[";
                }
                a.footnote-ref::after {
                    content: "]";
                }

                a:hover {
                        background-color: #ff5470;
                        color: #fff;
                }
                a[href^="https://"],
                a[href^="http://"] {
                        text-decoration: underline;
                }

                a[href^="https://"]:after,
                a[href^="http://"]:after {
                        content: "\2609";
                        text-decoration: none !important;
                }
        </style>
        <title>ruivieira.dev - Go filesystem operations</title>
    <script type="application/javascript">
        var doNotTrack = false;
        if (!doNotTrack) {
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-10507665-2', 'auto');

            ga('send', 'pageview');
        }
    </script>
</head>
<body>

<div id="sidebar">
        
            <h2>Contents</h2>
            <ul>
            
                <li><a href="#copying-files">Copying files</a></li>
            
                <li><a href="#path-operations">Path operations</a></li>
            
            </ul>
        
        
                <h2>Backlinks</h2>

                <ul>
                        
                                <li><a href="go.html">Go</a><sup>&#5833</sup></li>
                        
                    <li><a href="/content.html">content</a><sup>&#5833</sup></li>

                </ul>
        
    <div class="footer">
        modified 1609452893
    </div>

</div>

<div id="content">
    <h1 id="go-filesystem-operations">Go filesystem operations</h1>
<p>Notes on Go filesystem operations.</p>
<h2 id="copying-files">Copying files</h2>
<p>Go does not have an utility method to copy files. We have to rely on writing our own implementation using the reading and writing functionality in other packages. As an example:</p>
<pre style="background-color:#fff"><span style="color:#000;font-weight:bold">package</span> main 

<span style="color:#000;font-weight:bold">import</span> (
	<span style="color:#d14">&#34;io&#34;</span>
	<span style="color:#d14">&#34;log&#34;</span>
	<span style="color:#d14">&#34;os&#34;</span>
) 

<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() { 
	from, err <span style="color:#000;font-weight:bold">:=</span> os.<span style="color:#900;font-weight:bold">Open</span>(<span style="color:#d14">&#34;./foo.txt&#34;</span>)
	<span style="color:#000;font-weight:bold">if</span> err <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">nil</span> { 
		log.<span style="color:#900;font-weight:bold">Fatal</span>(err) 
	} 
	<span style="color:#000;font-weight:bold">defer</span> from.<span style="color:#900;font-weight:bold">Close</span>() 
	
	to, err <span style="color:#000;font-weight:bold">:=</span> os.<span style="color:#900;font-weight:bold">OpenFile</span>(<span style="color:#d14">&#34;./bar.txt&#34;</span>, os.O_RDWR|os.O_CREATE, <span style="color:#099">0666</span>) 
	<span style="color:#000;font-weight:bold">if</span> err <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">nil</span> { 
		log.<span style="color:#900;font-weight:bold">Fatal</span>(err) 
	} 
	<span style="color:#000;font-weight:bold">defer</span> to.<span style="color:#900;font-weight:bold">Close</span>() 
	
	_, err = io.<span style="color:#900;font-weight:bold">Copy</span>(to, from) 
	<span style="color:#000;font-weight:bold">if</span> err <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">nil</span> { 
		log.<span style="color:#900;font-weight:bold">Fatal</span>(err) 
	}
}
</pre><h2 id="path-operations">Path operations</h2>
<h3 id="basepath">Basepath</h3>
<p>To get the basepath of a path string we use the <a href="https://golang.org/pkg/path/#Dir">Dir</a> method:</p>
<pre style="background-color:#fff">filepath.<span style="color:#900;font-weight:bold">Dir</span>(<span style="color:#d14">&#34;/etc/foo/file.txt&#34;</span>) <span style="color:#998;font-style:italic">// &#34;/etc/foo&#34;
</span></pre><h3 id="check-if-directory-exists">Check if directory exists</h3>
<pre style="background-color:#fff"><span style="color:#000;font-weight:bold">if</span> _, err <span style="color:#000;font-weight:bold">:=</span> os.<span style="color:#900;font-weight:bold">Stat</span>(<span style="color:#d14">&#34;/etc/foo/&#34;</span>); os.<span style="color:#900;font-weight:bold">IsNotExist</span>(err) {
	<span style="color:#998;font-style:italic">// do something because it does not exist
</span><span style="color:#998;font-style:italic"></span>}
</pre><h3 id="create-nested-directories">Create nested directories</h3>
<p>Use <a href="https://golang.org/pkg/os/#MkdirAll">MkdirAll</a>:</p>
<pre style="background-color:#fff">os.<span style="color:#900;font-weight:bold">MkdirAll</span>(<span style="color:#d14">&#34;/etc/long/nested/path/to/create&#34;</span>, os.ModePerm)
</pre>
    <div class="footer">
        <span class="cc-symbol">&#127341;</span> 2020 CC BY Rui Vieira
    </div>
</div>

</body>
</html>